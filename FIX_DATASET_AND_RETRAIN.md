# æ•°æ®é›†ä¿®å¤å’Œé‡æ–°è®­ç»ƒæŒ‡å—

## ğŸ” é—®é¢˜æ ¹æº

å‘ç°äº†**ä¸‰ä¸ªåœ°æ–¹**éƒ½åœ¨åˆ›å»ºç°è‰²å›¾åƒï¼š

1. **`src/scripts/prepare_data.py`** (ç¬¬65è¡Œ)
   ```python
   image = Image.new("RGB", (256, 256), color=(128, 128, 128))  # ç°è‰²ï¼
   ```

2. **`src/data/dataset.py`** çš„ `_create_dummy_data()` (ç¬¬158è¡Œ)
   ```python
   image = Image.new("RGB", (self.image_size, self.image_size), color=(128, 128, 128))  # ç°è‰²ï¼
   ```

3. **`data/coco_subset/images/`** ä¸‹çš„æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯ç°è‰²çš„ï¼ˆç”± prepare_data.py ç”Ÿæˆï¼‰

## âœ… å·²ä¿®å¤

### ä¿®å¤1: æ•°æ®å‡†å¤‡è„šæœ¬
- `prepare_data.py` ç°åœ¨ç”Ÿæˆå½©è‰²éšæœºå›¾åƒ
- ä½¿ç”¨éšæœº RGB å€¼å’Œå™ªå£°æ¨¡å¼

### ä¿®å¤2: æ•°æ®é›†åŠ è½½
- `_create_dummy_data()` ç°åœ¨ç”Ÿæˆå½©è‰²éšæœºå›¾åƒ
- `_load_coco_dataset()` ä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ•°æ®

## ğŸš€ é‡æ–°è®­ç»ƒæ­¥éª¤

### æ­¥éª¤1: åˆ é™¤æ—§çš„ç°è‰²æ•°æ®

```bash
# åˆ é™¤æ—§çš„ç°è‰²å›¾ç‰‡
rm -rf data/coco_subset/images/*

# æˆ–è€…åˆ é™¤æ•´ä¸ªç›®å½•é‡æ–°åˆ›å»º
rm -rf data/coco_subset
```

### æ­¥éª¤2: é‡æ–°å‡†å¤‡æ•°æ®ï¼ˆä½¿ç”¨ä¿®å¤åçš„è„šæœ¬ï¼‰

```bash
# ä½¿ç”¨ä¿®å¤åçš„è„šæœ¬ç”Ÿæˆå½©è‰²æ•°æ®
python src/scripts/prepare_data.py \
    --type coco \
    --output ./data/coco_subset \
    --num_samples 5000
```

**éªŒè¯æ•°æ®**:
```bash
# æ£€æŸ¥ç”Ÿæˆçš„å›¾ç‰‡æ˜¯å¦æœ‰é¢œè‰²
python3 << 'PYEOF'
from PIL import Image
import numpy as np
from pathlib import Path

images_dir = Path("data/coco_subset/images")
image_files = list(images_dir.glob("*.jpg"))[:5]

for img_file in image_files:
    img = Image.open(img_file)
    arr = np.array(img)
    if arr.ndim == 3:
        r, g, b = arr[:,:,0], arr[:,:,1], arr[:,:,2]
        diff = np.abs(r.astype(float) - g.astype(float)) + np.abs(g.astype(float) - b.astype(float))
        avg_diff = diff.mean()
        print(f"{img_file.name}: é€šé“å·®å¼‚ = {avg_diff:.2f}", end="")
        if avg_diff < 10:
            print(" âŒ ç°è‰²")
        else:
            print(" âœ… æœ‰é¢œè‰²")
PYEOF
```

### æ­¥éª¤3: é‡æ–°è®­ç»ƒï¼ˆä»å¤´å¼€å§‹ï¼‰

```bash
# åˆ é™¤æ—§çš„æ£€æŸ¥ç‚¹ï¼ˆå¯é€‰ï¼Œå¦‚æœæƒ³ä»å¤´å¼€å§‹ï¼‰
# rm -rf outputs/checkpoint-*

# é‡æ–°è®­ç»ƒ
python src/scripts/train.py \
    --config configs/train_config.yaml
```

**æ³¨æ„**: ä¹‹å‰çš„æ¨¡å‹æ˜¯åœ¨ç°è‰²æ•°æ®ä¸Šè®­ç»ƒçš„ï¼Œéœ€è¦é‡æ–°è®­ç»ƒï¼

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä¿®å¤å‰
- æ•°æ®é›†: ç°è‰²å›¾åƒ
- è®­ç»ƒç»“æœ: æ¨¡å‹ç”Ÿæˆç°è‰²å›¾åƒ
- ç”Ÿæˆå›¾åƒ: ç°è‰²ï¼Œæ²¡æœ‰å†…å®¹

### ä¿®å¤å
- æ•°æ®é›†: å½©è‰²éšæœºå›¾åƒï¼ˆæœ‰é¢œè‰²å·®å¼‚ï¼‰
- è®­ç»ƒç»“æœ: æ¨¡å‹å¯ä»¥å­¦ä¹ ç”Ÿæˆå½©è‰²å›¾åƒ
- ç”Ÿæˆå›¾åƒ: æœ‰é¢œè‰²ï¼Œæœ‰å†…å®¹

## âš ï¸ é‡è¦æç¤º

1. **å¿…é¡»é‡æ–°è®­ç»ƒ**: ä¹‹å‰çš„æ¨¡å‹æ˜¯åœ¨ç°è‰²æ•°æ®ä¸Šè®­ç»ƒçš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨
2. **æ•°æ®éªŒè¯**: è®­ç»ƒå‰åŠ¡å¿…éªŒè¯æ•°æ®ä¸æ˜¯ç°è‰²çš„
3. **çœŸå®æ•°æ®æ›´å¥½**: å³ä½¿ä¿®å¤äº†ç¤ºä¾‹æ•°æ®ï¼ŒçœŸå® COCO æ•°æ®é›†ä»ç„¶æ›´å¥½

## ğŸ”§ ä½¿ç”¨çœŸå® COCO æ•°æ®é›†ï¼ˆæ¨èï¼‰

å¦‚æœæƒ³ä½¿ç”¨çœŸå®çš„ COCO æ•°æ®é›†ï¼š

1. **ä¸‹è½½ COCO æ•°æ®é›†**:
   - ä» [COCO å®˜ç½‘](https://cocodataset.org/) ä¸‹è½½
   - æˆ–ä½¿ç”¨å…¶ä»–å¯ç”¨çš„ COCO æ•°æ®é›†æº

2. **å‡†å¤‡æ•°æ®**:
   ```bash
   # å¦‚æœæœ‰çœŸå®çš„ COCO æ•°æ®
   # ç»„ç»‡æˆä»¥ä¸‹ç»“æ„:
   # data/coco/
   #   images/
   #     image1.jpg
   #     image2.jpg
   #     ...
   #   metadata.json
   ```

3. **ä¿®æ”¹é…ç½®**:
   ```yaml
   data:
     dataset_name: "custom"
     dataset_path: "./data/coco"
   ```

## ğŸ“ éªŒè¯æ¸…å•

- [ ] åˆ é™¤æ—§çš„ç°è‰²æ•°æ®
- [ ] ä½¿ç”¨ä¿®å¤åçš„è„šæœ¬é‡æ–°å‡†å¤‡æ•°æ®
- [ ] éªŒè¯æ–°æ•°æ®æœ‰é¢œè‰²ï¼ˆé€šé“å·®å¼‚ > 10ï¼‰
- [ ] é‡æ–°è®­ç»ƒæ¨¡å‹
- [ ] éªŒè¯ç”Ÿæˆçš„å›¾åƒæœ‰é¢œè‰²

---

**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ  
**éœ€è¦æ“ä½œ**: âš ï¸ é‡æ–°å‡†å¤‡æ•°æ®å’Œé‡æ–°è®­ç»ƒ

