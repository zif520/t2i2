# è·å–çœŸå®æ•°æ®é›†æŒ‡å—

## ğŸ” é—®é¢˜

å½“å‰çš„æ•°æ®å‡†å¤‡è„šæœ¬ç”Ÿæˆçš„æ˜¯**éšæœºå™ªå£°å›¾åƒ**ï¼Œä¸æ˜¯çœŸå®çš„å›¾åƒå†…å®¹ã€‚è¿™å¯¹äºè®­ç»ƒæ–‡ç”Ÿå›¾æ¨¡å‹æ˜¯ä¸å¤Ÿçš„ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨çœŸå®çš„ COCO æ•°æ®é›†ï¼ˆæ¨èï¼‰

#### æ–¹æ³•A: ä» Hugging Face ä¸‹è½½ï¼ˆå·²æ›´æ–°è„šæœ¬ï¼‰

æˆ‘å·²ç»æ›´æ–°äº† `prepare_data.py`ï¼Œç°åœ¨ä¼šå°è¯•ä» Hugging Face ä¸‹è½½çœŸå®çš„ COCO æ•°æ®ï¼š

```bash
python src/scripts/prepare_data.py \
    --type coco \
    --output ./data/coco_subset \
    --num_samples 5000
```

**æ³¨æ„**: 
- éœ€è¦ç½‘ç»œè¿æ¥
- ä¸‹è½½å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´
- å¦‚æœä¸‹è½½å¤±è´¥ï¼Œä¼šæç¤ºå…¶ä»–æ–¹æ³•

#### æ–¹æ³•B: æ‰‹åŠ¨ä¸‹è½½ COCO æ•°æ®é›†

1. **è®¿é—® COCO å®˜ç½‘**: https://cocodataset.org/
2. **ä¸‹è½½æ•°æ®**:
   - è®­ç»ƒå›¾åƒ: http://images.cocodataset.org/zips/train2017.zip (18GB)
   - éªŒè¯å›¾åƒ: http://images.cocodataset.org/zips/val2017.zip (1GB)
   - æ ‡æ³¨æ–‡ä»¶: http://images.cocodataset.org/annotations/annotations_trainval2017.zip

3. **è§£å‹å¹¶ç»„ç»‡æ•°æ®**:
   ```bash
   # è§£å‹
   unzip train2017.zip -d ./data/coco_raw/
   unzip annotations_trainval2017.zip -d ./data/coco_raw/
   
   # ä½¿ç”¨è„šæœ¬å¤„ç†
   python src/scripts/prepare_coco_from_download.py \
       --images_dir ./data/coco_raw/train2017 \
       --annotations_file ./data/coco_raw/annotations/captions_train2017.json \
       --output ./data/coco_subset \
       --num_samples 5000
   ```

### æ–¹æ¡ˆ2: ä½¿ç”¨å…¶ä»–å…¬å¼€æ•°æ®é›†

#### LAION-400M å­é›†

```bash
# ä½¿ç”¨ LAION æ•°æ®é›†ï¼ˆéœ€è¦æ›´å¤šå­˜å‚¨ç©ºé—´ï¼‰
# å¯ä»¥ä» https://laion.ai/ è·å–
```

#### Conceptual Captions

```bash
# ä½¿ç”¨ Conceptual Captions æ•°æ®é›†
# å¯ä»¥ä» Google è·å–
```

### æ–¹æ¡ˆ3: å‡†å¤‡è‡ªå·±çš„æ•°æ®é›†

å¦‚æœä½ æœ‰è‡ªå·±çš„å›¾åƒå’Œæ–‡æœ¬æè¿°ï¼š

1. **ç»„ç»‡æ•°æ®**:
   ```
   my_data/
   â”œâ”€â”€ image1.jpg
   â”œâ”€â”€ image1.txt  # å¯¹åº”çš„æ–‡æœ¬æè¿°
   â”œâ”€â”€ image2.jpg
   â”œâ”€â”€ image2.txt
   â””â”€â”€ ...
   ```

2. **ä½¿ç”¨è„šæœ¬å¤„ç†**:
   ```bash
   python src/scripts/prepare_data.py \
       --type custom \
       --input ./my_data \
       --output ./data/custom
   ```

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆä½¿ç”¨ä¿®å¤åçš„è„šæœ¬ï¼‰

### æ­¥éª¤1: å°è¯•è‡ªåŠ¨ä¸‹è½½

```bash
# ä½¿ç”¨æ›´æ–°åçš„è„šæœ¬ï¼ˆä¼šå°è¯•ä¸‹è½½çœŸå®æ•°æ®ï¼‰
python src/scripts/prepare_data.py \
    --type coco \
    --output ./data/coco_subset \
    --num_samples 5000
```

### æ­¥éª¤2: å¦‚æœä¸‹è½½å¤±è´¥

è„šæœ¬ä¼šæç¤ºä½ ï¼š
1. æ‰‹åŠ¨ä¸‹è½½ COCO æ•°æ®é›†
2. ä½¿ç”¨å…¶ä»–æ•°æ®æº
3. å‡†å¤‡è‡ªå·±çš„æ•°æ®é›†

### æ­¥éª¤3: éªŒè¯æ•°æ®

```bash
# æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰çœŸå®å†…å®¹ï¼ˆä¸æ˜¯å™ªå£°ï¼‰
python3 << 'PYEOF'
from PIL import Image
from pathlib import Path

images_dir = Path("data/coco_subset/images")
img_file = list(images_dir.glob("*.jpg"))[0]
img = Image.open(img_file)
img.show()  # åº”è¯¥çœ‹åˆ°çœŸå®çš„å›¾åƒï¼Œä¸æ˜¯å™ªå£°
print(f"å›¾åƒå°ºå¯¸: {img.size}")
print("å¦‚æœçœ‹åˆ°çœŸå®çš„å›¾åƒå†…å®¹ï¼ˆä¸æ˜¯éšæœºå™ªå£°ï¼‰ï¼Œè¯´æ˜æ•°æ®æ­£ç¡®")
PYEOF
```

## ğŸ“Š æ•°æ®è´¨é‡è¦æ±‚

### çœŸå®å›¾åƒåº”è¯¥:
- âœ… æœ‰æ¸…æ™°çš„å›¾åƒå†…å®¹ï¼ˆç‰©ä½“ã€åœºæ™¯ç­‰ï¼‰
- âœ… ä¸æ˜¯çº¯å™ªå£°æˆ–éšæœºå›¾æ¡ˆ
- âœ… æœ‰å¯¹åº”çš„æ–‡æœ¬æè¿°
- âœ… å›¾åƒè´¨é‡æ¸…æ™°

### é¿å…:
- âŒ éšæœºå™ªå£°å›¾åƒ
- âŒ çº¯è‰²å›¾åƒ
- âŒ æ²¡æœ‰æ„ä¹‰çš„å›¾æ¡ˆ

## âš ï¸ é‡è¦æç¤º

1. **å¿…é¡»ä½¿ç”¨çœŸå®æ•°æ®**: éšæœºå™ªå£°æ— æ³•è®­ç»ƒå‡ºå¥½çš„æ–‡ç”Ÿå›¾æ¨¡å‹
2. **æ•°æ®é‡**: è‡³å°‘éœ€è¦å‡ åƒå¼ çœŸå®å›¾åƒæ‰èƒ½æœ‰åŸºæœ¬æ•ˆæœ
3. **æ•°æ®è´¨é‡**: å›¾åƒå’Œæ–‡æœ¬æè¿°çš„è´¨é‡ç›´æ¥å½±å“æ¨¡å‹æ•ˆæœ

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: ä¸‹è½½è¶…æ—¶

**è§£å†³**: 
- å¢åŠ è¶…æ—¶æ—¶é—´
- ä½¿ç”¨é•œåƒç«™ç‚¹
- æ‰‹åŠ¨ä¸‹è½½

### é—®é¢˜2: æ•°æ®é›†æ ¼å¼ä¸åŒ¹é…

**è§£å†³**: 
- æ£€æŸ¥æ•°æ®é›†æ ¼å¼
- ä½¿ç”¨ `prepare_custom_data()` å¤„ç†è‡ªå®šä¹‰æ ¼å¼

### é—®é¢˜3: æ•°æ®ä»ç„¶æ˜¯å™ªå£°

**è§£å†³**: 
- ç¡®è®¤ä½¿ç”¨çš„æ˜¯çœŸå®æ•°æ®é›†
- æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£ç¡®
- éªŒè¯ä¸‹è½½çš„æ•°æ®

---

**æ›´æ–°**: å·²ä¿®å¤ `prepare_data.py`ï¼Œç°åœ¨ä¼šå°è¯•ä¸‹è½½çœŸå®çš„ COCO æ•°æ®ã€‚

